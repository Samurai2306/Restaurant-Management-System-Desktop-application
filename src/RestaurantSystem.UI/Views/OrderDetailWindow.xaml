<Window x:Class="RestaurantSystem.UI.Views.OrderDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Детали заказа"
        Height="600"
        Width="900"
        Background="#1E1E1E"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Grid Margin="0">
        <!-- Header -->
        <Border Background="#673AB7"
                Height="80"
                VerticalAlignment="Top">
            <Grid Margin="24,0">
                <TextBlock x:Name="TitleText"
                        Text="Детали заказа"
                        FontSize="24"
                        FontWeight="Bold"
                           Foreground="White"
                        VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Content -->
        <Grid Margin="0,80,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Order Items List -->
            <Border Grid.Column="0"
                    Background="#2C2C2C"
                    BorderBrush="#404040"
                    BorderThickness="0,0,1,0"
                    Margin="24">
                <StackPanel>
                    <TextBlock Text="Позиции заказа"
                            FontSize="18"
                            FontWeight="SemiBold"
                               Foreground="White"
                            Margin="0,0,0,16"/>

                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                            MaxHeight="400">
                        <DataGrid x:Name="ItemsDataGrid"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  SelectionMode="Single"
                                  Background="#2C2C2C"
                                  GridLinesVisibility="All"
                                  BorderBrush="#404040"
                                  RowBackground="#2C2C2C"
                                  AlternatingRowBackground="#333333">

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Блюдо"
                                        Binding="{Binding DishName}"
                                        Width="*"
                                        IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                            <Setter Property="VerticalAlignment"
                                                    Value="Center"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn Header="Кол-во"
                                        Binding="{Binding Quantity}"
                                        Width="80"
                                        IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                            <Setter Property="VerticalAlignment"
                                                    Value="Center"/>
                                            <Setter Property="HorizontalAlignment"
                                                    Value="Center"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn Header="Цена"
                                        Binding="{Binding UnitPrice, StringFormat=C}"
                                        Width="100"
                                        IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                            <Setter Property="VerticalAlignment"
                                                    Value="Center"/>
                                            <Setter Property="TextAlignment"
                                                    Value="Right"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn Header="Итого"
                                        Binding="{Binding TotalPrice, StringFormat=C}"
                                        Width="100"
                                        IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground"
                                                    Value="#4CAF50"/>
                                            <Setter Property="FontWeight"
                                                    Value="SemiBold"/>
                                            <Setter Property="VerticalAlignment"
                                                    Value="Center"/>
                                            <Setter Property="TextAlignment"
                                                    Value="Right"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTemplateColumn Header="Статус"
                                        Width="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ComboBox SelectedItem="{Binding Status}"
                                                    ItemsSource="{Binding}"
                                                    Width="110"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>

                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background"
                                            Value="#404040"/>
                                    <Setter Property="Foreground"
                                            Value="White"/>
                                    <Setter Property="FontWeight"
                                            Value="SemiBold"/>
                                    <Setter Property="BorderBrush"
                                            Value="#555555"/>
                                    <Setter Property="Padding"
                                            Value="8,4"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                        </DataGrid>
                    </ScrollViewer>

                    <Button x:Name="AddItemButton"
                            Content="➕ ДОБАВИТЬ ПОЗИЦИЮ"
                            Click="AddItemButton_Click"
                            Background="#4CAF50"
                            Foreground="White"
                            Height="36"
                            Margin="0,16,0,0"
                            Cursor="Hand"/>
                </StackPanel>
            </Border>

            <!-- Order Info -->
            <Border Grid.Column="1"
                    Background="#2C2C2C"
                    BorderBrush="#404040"
                    BorderThickness="0,0,0,0"
                    Margin="0,24,24,24">
                <StackPanel Margin="24">
                    <TextBlock Text="Информация о заказе"
                            FontSize="18"
                            FontWeight="SemiBold"
                               Foreground="White"
                            Margin="0,0,0,16"/>

                    <TextBlock Text="Итого:"
                            FontSize="14"
                            Foreground="#999"
                            Margin="0,0,0,4"/>
                    <TextBlock x:Name="TotalAmountText"
                            Text="$0.00"
                            FontSize="24"
                            FontWeight="Bold"
                               Foreground="#4CAF50"
                            Margin="0,0,0,16"/>

                    <TextBlock Text="Статус:"
                            FontSize="14"
                            Foreground="#999"
                            Margin="0,0,0,4"/>
                    <TextBlock x:Name="StatusText"
                            Text="Новый"
                            FontSize="16"
                            FontWeight="SemiBold"
                               Foreground="#673AB7"
                            Margin="0,0,0,16"/>

                    <TextBlock Text="Стол:"
                            FontSize="14"
                            Foreground="#999"
                            Margin="0,0,0,4"/>
                    <TextBlock x:Name="TableText"
                            Text="-"
                            FontSize="16"
                            Foreground="White"
                            Margin="0,0,0,16"/>

                    <Separator Background="#404040"
                            Margin="0,8,0,8"/>

                    <TextBlock Text="Особые пожелания:"
                            FontSize="14"
                            Foreground="#999"
                            Margin="0,0,0,4"/>
                    <TextBlock x:Name="InstructionsText"
                            Text="-"
                            FontSize="14"
                            Foreground="White"
                               TextWrapping="Wrap"
                            Margin="0,0,0,16"/>

                    <Button x:Name="UpdateOrderButton"
                            Content="ОБНОВИТЬ ЗАКАЗ"
                            Click="UpdateOrderButton_Click"
                            Background="#673AB7"
                            Foreground="White"
                            Height="40"
                            Margin="0,16,0,8"
                            Cursor="Hand"/>

                    <Button x:Name="CompleteOrderButton"
                            Content="ЗАВЕРШИТЬ ЗАКАЗ"
                            Click="CompleteOrderButton_Click"
                            Background="#4CAF50"
                            Foreground="White"
                            Height="40"
                            Margin="0,0,0,8"
                            Cursor="Hand"/>

                    <Button x:Name="CancelOrderButton"
                            Content="ОТМЕНИТЬ ЗАКАЗ"
                            Click="CancelOrderButton_Click"
                            Background="#F44336"
                            Foreground="White"
                            Height="40"
                            Cursor="Hand"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>

