<Window x:Class="RestaurantSystem.UI.Views.ReservationEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Новая бронь"
        Height="700"
        Width="550"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E"
        Foreground="White"
        ResizeMode="NoResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with gradient -->
        <Border Grid.Row="0"
                CornerRadius="8"
                Margin="0,0,0,20">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0"
                        EndPoint="1,0">
                    <GradientStop Color="#673AB7"
                            Offset="0"/>
                    <GradientStop Color="#512DA8"
                            Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel Margin="20,16">
                <TextBlock x:Name="TitleTextBlock"
                        Text="Создать новую бронь"
                           FontSize="24"
                        FontWeight="Bold"
                        Foreground="White"/>
                <TextBlock Text="Заполните всю необходимую информацию для бронирования стола"
                           FontSize="12"
                        Foreground="White"
                        Opacity="0.9"
                        Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- Form with visual grouping -->
        <ScrollViewer Grid.Row="1"
                VerticalScrollBarVisibility="Auto"
                HorizontalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- Client Information Section -->
                <Border Background="#2C2C2C"
                        BorderBrush="#404040"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="16"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Информация о клиенте"
                                FontSize="14"
                                FontWeight="Bold"
                                   Foreground="#673AB7"
                                Margin="0,0,0,16"/>

                        <TextBlock Text="Имя клиента *"
                                FontSize="13"
                                FontWeight="SemiBold"
                                Foreground="White"
                                Margin="0,0,0,6"/>
                        <TextBox x:Name="ClientNameTextBox"
                                Height="40"
                                Padding="12,0"
                                FontSize="14"
                                 Background="#1E1E1E"
                                Foreground="White"
                                BorderBrush="#404040"
                                BorderThickness="1"
                                 MaxLength="100"
                                Margin="0,0,0,16"/>

                        <TextBlock Text="Номер телефона *"
                                FontSize="13"
                                FontWeight="SemiBold"
                                Foreground="White"
                                Margin="0,0,0,6"/>
                        <TextBox x:Name="ClientPhoneTextBox"
                                Height="40"
                                Padding="12,0"
                                FontSize="14"
                                 Background="#1E1E1E"
                                Foreground="White"
                                BorderBrush="#404040"
                                BorderThickness="1"
                                 MaxLength="20"
                                Margin="0,0,0,8"/>
                        <TextBlock Text="Формат: +1234567890 или 1234567890"
                                FontSize="11"
                                Foreground="#999"
                                Margin="4,0,0,8"/>

                        <TextBlock Text="Email адрес (необязательно)"
                                FontSize="13"
                                FontWeight="SemiBold"
                                Foreground="White"
                                Margin="0,0,0,6"/>
                        <TextBox x:Name="ClientEmailTextBox"
                                Height="40"
                                Padding="12,0"
                                FontSize="14"
                                 Background="#1E1E1E"
                                Foreground="White"
                                BorderBrush="#404040"
                                BorderThickness="1"
                                 MaxLength="100"/>
                    </StackPanel>
                </Border>

                <!-- Reservation Details Section -->
                <Border Background="#2C2C2C"
                        BorderBrush="#404040"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="16"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Детали бронирования"
                                FontSize="14"
                                FontWeight="Bold"
                                   Foreground="#673AB7"
                                Margin="0,0,0,16"/>

                        <!-- Date and Time Grid -->
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Date -->
                            <StackPanel Grid.Column="0"
                                    Grid.Row="0">
                                <TextBlock Text="Дата бронирования *"
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Margin="0,0,0,6"/>
                                <DatePicker x:Name="DatePicker"
                                        Height="40"
                                        FontSize="14"
                                            Background="#1E1E1E"
                                        Foreground="White"
                                        BorderBrush="#404040"
                                        BorderThickness="1">
                                    <DatePicker.Resources>
                                        <Style TargetType="Calendar">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                        </Style>
                                        <Style TargetType="CalendarItem">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                        </Style>
                                        <Style TargetType="DatePickerTextBox">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                            <Setter Property="BorderBrush"
                                                    Value="#404040"/>
                                        </Style>
                                    </DatePicker.Resources>
                                </DatePicker>
                            </StackPanel>

                            <!-- Time -->
                            <StackPanel Grid.Column="2"
                                    Grid.Row="0">
                                <TextBlock Text="Время бронирования *"
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Margin="0,0,0,6"/>
                                <ComboBox x:Name="TimeComboBox"
                                        Height="40"
                                        FontSize="14"
                                          Background="#1E1E1E"
                                        Foreground="White"
                                        BorderBrush="#404040"
                                        BorderThickness="1">
                                    <ComboBox.Resources>
                                        <Style TargetType="ComboBoxItem">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                        </Style>
                                    </ComboBox.Resources>
                                </ComboBox>
                            </StackPanel>

                            <!-- Duration -->
                            <StackPanel Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    Grid.Row="1"
                                    Margin="0,16,0,0">
                                <TextBlock Text="Длительность *"
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Margin="0,0,0,6"/>
                                <ComboBox x:Name="DurationComboBox"
                                        Height="40"
                                        FontSize="14"
                                          Background="#1E1E1E"
                                        Foreground="White"
                                        BorderBrush="#404040"
                                        BorderThickness="1">
                                    <ComboBox.Resources>
                                        <Style TargetType="ComboBoxItem">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                        </Style>
                                    </ComboBox.Resources>
                                    <ComboBoxItem Content="1 hour"
                                            Tag="1"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="1.5 hours"
                                            Tag="1.5"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="2 hours"
                                            Tag="2"
                                            IsSelected="True"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="2.5 hours"
                                            Tag="2.5"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="3 hours"
                                            Tag="3"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="3.5 hours"
                                            Tag="3.5"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="4 hours"
                                            Tag="4"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Table Selection Section -->
                <Border Background="#2C2C2C"
                        BorderBrush="#404040"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="16"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Стол и гости"
                                FontSize="14"
                                FontWeight="Bold"
                                   Foreground="#673AB7"
                                Margin="0,0,0,16"/>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Table Selection -->
                            <StackPanel Grid.Column="0"
                                    Grid.Row="0">
                                <TextBlock Text="Выберите стол *"
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Margin="0,0,0,6"/>
                                <ComboBox x:Name="TableComboBox"
                                        Height="40"
                                        FontSize="14"
                                          DisplayMemberPath="Name"
                                        SelectedValuePath="Id"
                                          Background="#1E1E1E"
                                        Foreground="White"
                                        BorderBrush="#404040"
                                        BorderThickness="1">
                                    <ComboBox.Resources>
                                        <Style TargetType="ComboBoxItem">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                        </Style>
                                    </ComboBox.Resources>
                                </ComboBox>
                                <TextBlock x:Name="TableInfoTextBlock"
                                        FontSize="11"
                                        Foreground="#999"
                                           Margin="4,4,0,0"
                                        TextWrapping="Wrap"/>
                            </StackPanel>

                            <!-- Guest Count -->
                            <StackPanel Grid.Column="2"
                                    Grid.Row="0">
                                <TextBlock Text="Кол-во гостей *"
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Margin="0,0,0,6"/>
                                <ComboBox x:Name="GuestComboBox"
                                        Height="40"
                                        FontSize="14"
                                          Background="#1E1E1E"
                                        Foreground="White"
                                        BorderBrush="#404040"
                                        BorderThickness="1">
                                    <ComboBox.Resources>
                                        <Style TargetType="ComboBoxItem">
                                            <Setter Property="Background"
                                                    Value="#1E1E1E"/>
                                            <Setter Property="Foreground"
                                                    Value="White"/>
                                        </Style>
                                    </ComboBox.Resources>
                                    <ComboBoxItem Content="1 гость"
                                            Tag="1"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="2 гостя"
                                            Tag="2"
                                            IsSelected="True"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="3 гостя"
                                            Tag="3"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="4 гостя"
                                            Tag="4"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="5 гостей"
                                            Tag="5"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="6 гостей"
                                            Tag="6"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="7 гостей"
                                            Tag="7"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="8 гостей"
                                            Tag="8"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                    <ComboBoxItem Content="9+ гостей"
                                            Tag="9"
                                            Background="#1E1E1E"
                                            Foreground="White"/>
                                </ComboBox>
                            </StackPanel>

                            <!-- Special Requests -->
                            <StackPanel Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    Grid.Row="1"
                                    Margin="0,16,0,0">
                                <TextBlock Text="Особые пожелания или ограничения в питании"
                                        FontSize="13"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Margin="0,0,0,6"/>
                                <TextBox x:Name="CommentTextBox"
                                        MinHeight="80"
                                        Padding="12,8"
                                        FontSize="14"
                                         TextWrapping="Wrap"
                                        AcceptsReturn="True"
                                        VerticalScrollBarVisibility="Auto"
                                         Background="#1E1E1E"
                                        Foreground="White"
                                        BorderBrush="#404040"
                                        BorderThickness="1"
                                         MaxLength="500"/>
                                <TextBlock Text="например: День рождения, аллергии, доступ для инвалидной коляски и т.д."
                                           FontSize="11"
                                        Foreground="#999"
                                        Margin="4,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Status Section (всегда показывать) -->
                <Border x:Name="StatusSection"
                        Visibility="Visible"
                        Background="#2C2C2C"
                        BorderBrush="#404040"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="16"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Статус бронирования"
                                FontSize="14"
                                FontWeight="Bold"
                                   Foreground="#673AB7"
                                Margin="0,0,0,16"/>
                        <ComboBox x:Name="StatusComboBox"
                                Height="40"
                                FontSize="14"
                                  Background="#1E1E1E"
                                Foreground="White"
                                BorderBrush="#404040"
                                BorderThickness="1">
                            <ComboBoxItem Content="Ожидание"
                                    Tag="Pending"
                                    IsSelected="True"
                                    Background="#1E1E1E"
                                    Foreground="White"/>
                            <ComboBoxItem Content="Подтверждено"
                                    Tag="Confirmed"
                                    Background="#1E1E1E"
                                    Foreground="White"/>
                            <ComboBoxItem Content="Заселён"
                                    Tag="CheckedIn"
                                    Background="#1E1E1E"
                                    Foreground="White"/>
                            <ComboBoxItem Content="Завершено"
                                    Tag="Completed"
                                    Background="#1E1E1E"
                                    Foreground="White"/>
                            <ComboBoxItem Content="Отменено"
                                    Tag="Cancelled"
                                    Background="#1E1E1E"
                                    Foreground="White"/>
                            <ComboBoxItem Content="Не явился"
                                    Tag="NoShow"
                                    Background="#1E1E1E"
                                    Foreground="White"/>
                        </ComboBox>
                    </StackPanel>
                </Border>

                <TextBlock Text="* Required fields"
                        FontSize="11"
                        Foreground="#999"
                        Margin="0,0,0,8"/>
                <TextBlock Text="Примечание: вы можете изменить детали брони позже."
                           FontSize="11"
                        Foreground="#999"
                        TextWrapping="Wrap"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons with icons -->
        <Border Grid.Row="2"
                BorderThickness="0,1,0,0"
                BorderBrush="#404040"
                Padding="0,16,0,0">
            <Grid>
                <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right">
                    <Button Content="Отмена"
                            IsCancel="True"
                            Click="Cancel_Click"
                            Background="Transparent"
                            Foreground="#999"
                            BorderBrush="#404040"
                            BorderThickness="1"
                            Padding="24,10"
                            FontSize="13"
                            FontWeight="Medium"
                            Margin="0,0,12,0"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6"
                                        Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button Content="Создать бронь"
                            IsDefault="True"
                            Click="Save_Click"
                            Background="#673AB7"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="32,10"
                            FontSize="13"
                            FontWeight="SemiBold"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        CornerRadius="6"
                                        Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
