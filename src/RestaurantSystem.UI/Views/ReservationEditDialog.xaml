<Window x:Class="RestaurantSystem.UI.Views.ReservationEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Новая бронь"
        Height="700" Width="550"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E"
        Foreground="White"
        ResizeMode="NoResize">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with gradient -->
        <Border Grid.Row="0" CornerRadius="8" Margin="0,0,0,20">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#673AB7" Offset="0"/>
                    <GradientStop Color="#512DA8" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel Margin="20,16">
                <TextBlock x:Name="TitleTextBlock" Text="Создать новую бронь" 
                          FontSize="24" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Заполните всю необходимую информацию для бронирования стола" 
                          FontSize="12" Foreground="White" Opacity="0.9" Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- Form with visual grouping -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                
                <!-- Client Information Section -->
                <Border Background="#2C2C2C" BorderBrush="#404040" BorderThickness="1" 
                        CornerRadius="6" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Информация о клиенте" FontSize="14" FontWeight="Bold" 
                                  Foreground="#673AB7" Margin="0,0,0,16"/>
                        
                        <TextBlock Text="Имя клиента *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                        <TextBox x:Name="ClientNameTextBox" Height="40" Padding="12,0" FontSize="14"
                                Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"
                                MaxLength="100" Margin="0,0,0,16"/>
                        
                        <TextBlock Text="Номер телефона *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                        <TextBox x:Name="ClientPhoneTextBox" Height="40" Padding="12,0" FontSize="14"
                                Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"
                                MaxLength="20" Margin="0,0,0,8"/>
                        <TextBlock Text="Формат: +1234567890 или 1234567890" FontSize="11" Foreground="#999" Margin="4,0,0,8"/>
                        
                        <TextBlock Text="Email адрес (необязательно)" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                        <TextBox x:Name="ClientEmailTextBox" Height="40" Padding="12,0" FontSize="14"
                                Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"
                                MaxLength="100"/>
                    </StackPanel>
                </Border>
                
                <!-- Reservation Details Section -->
                <Border Background="#2C2C2C" BorderBrush="#404040" BorderThickness="1" 
                        CornerRadius="6" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Детали бронирования" FontSize="14" FontWeight="Bold" 
                                  Foreground="#673AB7" Margin="0,0,0,16"/>
                        
                        <!-- Date and Time Grid -->
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Date -->
                            <StackPanel Grid.Column="0" Grid.Row="0">
                                <TextBlock Text="Reservation Date *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                                <DatePicker x:Name="DatePicker" Height="40" FontSize="14"
                                           Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"/>
                            </StackPanel>
                            
                            <!-- Time -->
                            <StackPanel Grid.Column="2" Grid.Row="0">
                                <TextBlock Text="Reservation Time *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                                <ComboBox x:Name="TimeComboBox" Height="40" FontSize="14"
                                         Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"/>
                            </StackPanel>
                            
                            <!-- Duration -->
                            <StackPanel Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="1" Margin="0,16,0,0">
                                <TextBlock Text="Duration *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                                <ComboBox x:Name="DurationComboBox" Height="40" FontSize="14"
                                         Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1">
                                    <ComboBoxItem Content="1 hour" Tag="1"/>
                                    <ComboBoxItem Content="1.5 hours" Tag="1.5"/>
                                    <ComboBoxItem Content="2 hours" Tag="2" IsSelected="True"/>
                                    <ComboBoxItem Content="2.5 hours" Tag="2.5"/>
                                    <ComboBoxItem Content="3 hours" Tag="3"/>
                                    <ComboBoxItem Content="3.5 hours" Tag="3.5"/>
                                    <ComboBoxItem Content="4 hours" Tag="4"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Table Selection Section -->
                <Border Background="#2C2C2C" BorderBrush="#404040" BorderThickness="1" 
                        CornerRadius="6" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Table &amp; Guests" FontSize="14" FontWeight="Bold" 
                                  Foreground="#673AB7" Margin="0,0,0,16"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Table Selection -->
                            <StackPanel Grid.Column="0" Grid.Row="0">
                                <TextBlock Text="Select Table *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                                <ComboBox x:Name="TableComboBox" Height="40" FontSize="14"
                                         DisplayMemberPath="Name" SelectedValuePath="Id"
                                         Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"/>
                                <TextBlock x:Name="TableInfoTextBlock" FontSize="11" Foreground="#999" 
                                         Margin="4,4,0,0" TextWrapping="Wrap"/>
                            </StackPanel>
                            
                            <!-- Guest Count -->
                            <StackPanel Grid.Column="2" Grid.Row="0">
                                <TextBlock Text="Number of Guests *" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                                <ComboBox x:Name="GuestComboBox" Height="40" FontSize="14"
                                         Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1">
                                    <ComboBoxItem Content="1 guest" Tag="1"/>
                                    <ComboBoxItem Content="2 guests" Tag="2" IsSelected="True"/>
                                    <ComboBoxItem Content="3 guests" Tag="3"/>
                                    <ComboBoxItem Content="4 guests" Tag="4"/>
                                    <ComboBoxItem Content="5 guests" Tag="5"/>
                                    <ComboBoxItem Content="6 guests" Tag="6"/>
                                    <ComboBoxItem Content="7 guests" Tag="7"/>
                                    <ComboBoxItem Content="8 guests" Tag="8"/>
                                    <ComboBoxItem Content="9+ guests" Tag="9"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- Special Requests -->
                            <StackPanel Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="1" Margin="0,16,0,0">
                                <TextBlock Text="Special Requests or Dietary Restrictions" FontSize="13" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,6"/>
                                <TextBox x:Name="CommentTextBox" MinHeight="80" Padding="12,8" FontSize="14"
                                        TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                        Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1"
                                        MaxLength="500"/>
                                <TextBlock Text="e.g., Birthday celebration, allergies, wheelchair access, etc." 
                                         FontSize="11" Foreground="#999" Margin="4,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Status Section (only when editing) -->
                <Border x:Name="StatusSection" Visibility="Collapsed" 
                        Background="#2C2C2C" BorderBrush="#404040" BorderThickness="1" 
                        CornerRadius="6" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Reservation Status" FontSize="14" FontWeight="Bold" 
                                  Foreground="#673AB7" Margin="0,0,0,16"/>
                        <ComboBox x:Name="StatusComboBox" Height="40" FontSize="14"
                                 Background="#1E1E1E" Foreground="White" BorderBrush="#404040" BorderThickness="1">
                            <ComboBoxItem Content="Pending" Tag="Pending" IsSelected="True"/>
                            <ComboBoxItem Content="Confirmed" Tag="Confirmed"/>
                            <ComboBoxItem Content="Checked In" Tag="CheckedIn"/>
                            <ComboBoxItem Content="Completed" Tag="Completed"/>
                            <ComboBoxItem Content="Cancelled" Tag="Cancelled"/>
                            <ComboBoxItem Content="No Show" Tag="NoShow"/>
                        </ComboBox>
                    </StackPanel>
                </Border>
                
                <TextBlock Text="* Required fields" FontSize="11" Foreground="#999" Margin="0,0,0,8"/>
                <TextBlock Text="Note: You can change the reservation details later if needed." 
                         FontSize="11" Foreground="#999" TextWrapping="Wrap"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons with icons -->
        <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="#404040" Padding="0,16,0,0">
            <Grid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Отмена" IsCancel="True" Click="Cancel_Click"
                           Background="Transparent" Foreground="#999" BorderBrush="#404040" 
                           BorderThickness="1" Padding="24,10" FontSize="13" FontWeight="Medium"
                           Margin="0,0,12,0" Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                       BorderBrush="{TemplateBinding BorderBrush}"
                                       BorderThickness="{TemplateBinding BorderThickness}"
                                       CornerRadius="6" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button Content="Create Reservation" IsDefault="True" Click="Save_Click"
                           Background="#673AB7" Foreground="White" BorderThickness="0" 
                           Padding="32,10" FontSize="13" FontWeight="SemiBold" Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
